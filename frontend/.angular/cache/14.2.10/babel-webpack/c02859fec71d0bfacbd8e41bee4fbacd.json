{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/ea200304d/Desktop/ETF/rti.PIA/K2_MEAN_rokovi/avgust_22/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { Router } from '@angular/router';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../zajednicki.service\";\nimport * as i3 from \"@angular/common\";\n\nfunction TakmicarComponent_div_3_tr_5_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const r_r3 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", r_r3.serija, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", r_r3.rezultat, \" \");\n  }\n}\n\nfunction TakmicarComponent_div_3_tr_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵtemplate(1, TakmicarComponent_div_3_tr_5_div_1_Template, 5, 2, \"div\", 3);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const r_r3 = ctx.$implicit;\n    const d_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", r_r3.disciplina == d_r1);\n  }\n}\n\nfunction TakmicarComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"table\")(2, \"tr\")(3, \"th\", 2);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(5, TakmicarComponent_div_3_tr_5_Template, 2, 1, \"tr\", 1);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const d_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(d_r1);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.rezultati);\n  }\n}\n\nexport class TakmicarComponent {\n  constructor(router, zajednickiS) {\n    this.router = router;\n    this.zajednickiS = zajednickiS;\n    this.ulogovan = null;\n    this.rezultati = [];\n    this.discipline = [];\n    this.let_rez_za_discipline = [];\n    this.kraj_fja = false;\n    this.gotove_discipline = [];\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      //this.gotove_discipline.push(\"corak\")\n      _this.ulogovan = JSON.parse(localStorage.getItem(\"takmicar\"));\n      yield _this.zajednickiS.sve_rezultate_za_takmicara(_this.ulogovan.broj).subscribe( /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator(function* (res) {\n          _this.rezultati = res;\n          let i = 0;\n\n          for (let r of _this.rezultati) {\n            i++;\n\n            if (_this.discipline.indexOf(r.disciplina) >= 0) {} else {\n              _this.discipline.push(r.disciplina);\n\n              _this.let_rez_za_discipline.push([]);\n            }\n\n            if (i == _this.rezultati.length) {\n              yield _this.proveri_gotove();\n\n              _this.gotove_discipline.forEach( /*#__PURE__*/function () {\n                var _ref2 = _asyncToGenerator(function* (element) {\n                  console.log(\"adsaasdas\");\n                  yield _this.odredi_rangiranje(element);\n                });\n\n                return function (_x2) {\n                  return _ref2.apply(this, arguments);\n                };\n              }());\n              /*for(let d of this.gotove_discipline){\r\n                //odredi rangiranje\r\n                await this.odredi_rangiranje(d)\r\n              }*/\n\n            }\n          }\n        });\n\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n    })();\n  }\n\n  odredi_rangiranje(d) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      let tmp = [];\n      console.log(\"pozvan za \" + d);\n      yield _this2.zajednickiS.moderatori_za_disciplinu(d).subscribe( /*#__PURE__*/function () {\n        var _ref3 = _asyncToGenerator(function* (res) {\n          if (res) {\n            let tak = res.takmicari;\n            let i = -1;\n\n            for (let t of res.takmicari) {\n              yield _this2.zajednickiS.sve_rezultate_za_takmicara(t).subscribe(res => {\n                i++;\n\n                for (let r of res) {\n                  if (r.disciplina == d) {\n                    tmp.push(r);\n                  }\n                }\n\n                if (i == tak.length - 1) {}\n              });\n            }\n          }\n        });\n\n        return function (_x3) {\n          return _ref3.apply(this, arguments);\n        };\n      }());\n      console.log(\"rang\");\n      console.log(tmp);\n    })();\n  }\n\n  proveri_gotove() {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      let cnt = -1;\n\n      for (let d of _this3.discipline) {\n        cnt++;\n        let tmp = [];\n        yield _this3.zajednickiS.moderatori_za_disciplinu(d).subscribe( /*#__PURE__*/function () {\n          var _ref4 = _asyncToGenerator(function* (res) {\n            if (res) {\n              let tak = res.takmicari;\n              let i = -1;\n\n              for (let t of res.takmicari) {\n                yield _this3.zajednickiS.sve_rezultate_za_takmicara(t).subscribe(res => {\n                  i++;\n\n                  for (let r of res) {\n                    if (r.disciplina == d) {\n                      tmp.push(r);\n                    }\n                  }\n\n                  if (i == tak.length - 1) {\n                    if (tmp.length == tak.length * 3) {\n                      _this3.gotove_discipline.push(d);\n\n                      console.log(d + \" je pushovan\");\n                      console.log(_this3.gotove_discipline);\n                    }\n\n                    if (cnt == _this3.discipline.length - 1) {}\n                  }\n                });\n              }\n            } else {\n              console.log(\"elsee\");\n            }\n          });\n\n          return function (_x4) {\n            return _ref4.apply(this, arguments);\n          };\n        }());\n      }\n    })();\n  }\n\n  logout() {\n    localStorage.removeItem(\"takmicar\");\n    this.router.navigate([\"\"]);\n  }\n\n}\n\nTakmicarComponent.ɵfac = function TakmicarComponent_Factory(t) {\n  return new (t || TakmicarComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.ZajednickiService));\n};\n\nTakmicarComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: TakmicarComponent,\n  selectors: [[\"app-takmicar\"]],\n  decls: 4,\n  vars: 4,\n  consts: [[3, \"click\"], [4, \"ngFor\", \"ngForOf\"], [\"colspan\", \"2\"], [4, \"ngIf\"]],\n  template: function TakmicarComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtext(0);\n      i0.ɵɵelementStart(1, \"button\", 0);\n      i0.ɵɵlistener(\"click\", function TakmicarComponent_Template_button_click_1_listener() {\n        return ctx.logout();\n      });\n      i0.ɵɵtext(2, \"Odjava\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(3, TakmicarComponent_div_3_Template, 6, 2, \"div\", 1);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵtextInterpolate3(\"\", ctx.ulogovan.ime, \" [\", ctx.ulogovan.broj, \"], drzava:\", ctx.ulogovan.drzava, \" \");\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", ctx.discipline);\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJ0YWttaWNhci5jb21wb25lbnQuY3NzIn0= */\"]\n});","map":{"version":3,"mappings":";AACA,SAAgBA,MAAhB,QAA8B,iBAA9B;;;;;;;;ICMYC,4BAA6B,CAA7B,EAA6B,IAA7B;IAEQA;IACJA;IACAA;IACIA;IACJA;;;;;IAJIA;IAAAA;IAGAA;IAAAA;;;;;;IANZA;IACIA;IAQJA;;;;;;IARUA;IAAAA;;;;;;IANlBA,4BAAkC,CAAlC,EAAkC,OAAlC,EAAkC,CAAlC,EAAkC,IAAlC,EAAkC,CAAlC,EAAkC,IAAlC,EAAkC,CAAlC;IAG4BA;IAAKA;IAEzBA;IAUJA;;;;;;IAZwBA;IAAAA;IAEFA;IAAAA;;;;ADM1B,OAAM,MAAOC,iBAAP,CAAwB;EAE5BC,YAAoBC,MAApB,EAA2CC,WAA3C,EAAwE;IAApD;IAAuB;IAE3C,gBAAoB,IAApB;IACA,iBAA4B,EAA5B;IACA,kBAA2B,EAA3B;IACA,6BAA4B,EAA5B;IACA,gBAAkB,KAAlB;IACA,yBAA6B,EAA7B;EAP6E;;EAQvEC,QAAQ;IAAA;;IAAA;MACZ;MACA,KAAI,CAACC,QAAL,GAAgBC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAX,CAAhB;MAEA,MAAM,KAAI,CAACN,WAAL,CAAiBO,0BAAjB,CAA4C,KAAI,CAACL,QAAL,CAAcM,IAA1D,EAAgEC,SAAhE;QAAA,6BAA0E,WAAOC,GAAP,EAA6B;UAC3G,KAAI,CAACC,SAAL,GAAgBD,GAAhB;UACA,IAAIE,CAAC,GAAC,CAAN;;UACA,KAAI,IAAIC,CAAR,IAAa,KAAI,CAACF,SAAlB,EAA4B;YAC1BC,CAAC;;YACD,IAAG,KAAI,CAACE,UAAL,CAAgBC,OAAhB,CAAwBF,CAAC,CAACG,UAA1B,KAAuC,CAA1C,EAA6C,CAAE,CAA/C,MACK;cACH,KAAI,CAACF,UAAL,CAAgBG,IAAhB,CAAqBJ,CAAC,CAACG,UAAvB;;cACA,KAAI,CAACE,qBAAL,CAA2BD,IAA3B,CAAgC,EAAhC;YACD;;YACD,IAAGL,CAAC,IAAE,KAAI,CAACD,SAAL,CAAeQ,MAArB,EAA4B;cAC1B,MAAM,KAAI,CAACC,cAAL,EAAN;;cAEA,KAAI,CAACC,iBAAL,CAAuBC,OAAvB;gBAAA,8BAA+B,WAAOC,OAAP,EAAiB;kBAC9CC,OAAO,CAACC,GAAR,CAAY,WAAZ;kBACC,MAAM,KAAI,CAACC,iBAAL,CAAuBH,OAAvB,CAAN;gBAEF,CAJD;;gBAAA;kBAAA;gBAAA;cAAA;cAKA;;;;;YAMD;UACF;QACF,CA1BK;;QAAA;UAAA;QAAA;MAAA,IAAN;IAJY;EAgCb;;EAEKG,iBAAiB,CAACC,CAAD,EAAS;IAAA;;IAAA;MAC9B,IAAIC,GAAG,GAAmB,EAA1B;MACAJ,OAAO,CAACC,GAAR,CAAY,eAAaE,CAAzB;MACE,MAAM,MAAI,CAAC3B,WAAL,CAAiB6B,wBAAjB,CAA0CF,CAA1C,EAA6ClB,SAA7C;QAAA,8BAAuD,WAAOC,GAAP,EAAuB;UAClF,IAAGA,GAAH,EAAO;YACL,IAAIoB,GAAG,GAAGpB,GAAG,CAACqB,SAAd;YAEA,IAAInB,CAAC,GAAE,CAAC,CAAR;;YACA,KAAI,IAAIoB,CAAR,IAAatB,GAAG,CAACqB,SAAjB,EAA2B;cAC1B,MAAM,MAAI,CAAC/B,WAAL,CAAiBO,0BAAjB,CAA4CyB,CAA5C,EAA+CvB,SAA/C,CAA0DC,GAAD,IAAuB;gBACnFE,CAAC;;gBACD,KAAI,IAAIC,CAAR,IAAaH,GAAb,EAAiB;kBACf,IAAGG,CAAC,CAACG,UAAF,IAAgBW,CAAnB,EAAqB;oBACnBC,GAAG,CAACX,IAAJ,CAASJ,CAAT;kBACD;gBACF;;gBACD,IAAGD,CAAC,IAAGkB,GAAG,CAACX,MAAJ,GAAW,CAAlB,EAAqB,CACpB;cACF,CATI,CAAN;YAUA;UACF;QACF,CAlBK;;QAAA;UAAA;QAAA;MAAA,IAAN;MAmBAK,OAAO,CAACC,GAAR,CAAY,MAAZ;MACAD,OAAO,CAACC,GAAR,CAAYG,GAAZ;IAvB4B;EA0B/B;;EACKR,cAAc;IAAA;;IAAA;MAElB,IAAIa,GAAG,GAAC,CAAC,CAAT;;MACA,KAAI,IAAIN,CAAR,IAAa,MAAI,CAACb,UAAlB,EAA6B;QAC3BmB,GAAG;QACH,IAAIL,GAAG,GAAmB,EAA1B;QACA,MAAM,MAAI,CAAC5B,WAAL,CAAiB6B,wBAAjB,CAA0CF,CAA1C,EAA6ClB,SAA7C;UAAA,8BAAuD,WAAOC,GAAP,EAAuB;YAClF,IAAGA,GAAH,EAAQ;cAEN,IAAIoB,GAAG,GAAGpB,GAAG,CAACqB,SAAd;cAEF,IAAInB,CAAC,GAAE,CAAC,CAAR;;cACA,KAAI,IAAIoB,CAAR,IAAatB,GAAG,CAACqB,SAAjB,EAA2B;gBACzB,MAAM,MAAI,CAAC/B,WAAL,CAAiBO,0BAAjB,CAA4CyB,CAA5C,EAA+CvB,SAA/C,CAA0DC,GAAD,IAAuB;kBACpFE,CAAC;;kBACD,KAAI,IAAIC,CAAR,IAAaH,GAAb,EAAiB;oBACf,IAAGG,CAAC,CAACG,UAAF,IAAgBW,CAAnB,EAAqB;sBACnBC,GAAG,CAACX,IAAJ,CAASJ,CAAT;oBACD;kBACF;;kBACD,IAAGD,CAAC,IAAGkB,GAAG,CAACX,MAAJ,GAAW,CAAlB,EAAqB;oBACnB,IAAGS,GAAG,CAACT,MAAJ,IAAeW,GAAG,CAACX,MAAL,GAAa,CAA9B,EAAgC;sBAC9B,MAAI,CAACE,iBAAL,CAAuBJ,IAAvB,CAA4BU,CAA5B;;sBACAH,OAAO,CAACC,GAAR,CAAYE,CAAC,GAAG,cAAhB;sBACAH,OAAO,CAACC,GAAR,CAAY,MAAI,CAACJ,iBAAjB;oBACD;;oBACD,IAAGY,GAAG,IAAG,MAAI,CAACnB,UAAL,CAAgBK,MAAhB,GAAuB,CAAhC,EAAmC,CAClC;kBACF;gBACF,CAhBK,CAAN;cAiBD;YAEA,CAzBD,MAyBK;cACHK,OAAO,CAACC,GAAR,CAAY,OAAZ;YACD;UAKF,CAjCK;;UAAA;YAAA;UAAA;QAAA,IAAN;MAmCD;IAzCiB;EA0CnB;;EACDS,MAAM;IACJ7B,YAAY,CAAC8B,UAAb,CAAwB,UAAxB;IACA,KAAKpC,MAAL,CAAYqC,QAAZ,CAAqB,CAAC,EAAD,CAArB;EACD;;AArH2B;;;mBAAjBvC,mBAAiBD;AAAA;;;QAAjBC;EAAiBwC;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCZ9B7C;MAAiEA;MAAQA;QAAA,OAAS8C,YAAT;MAAiB,CAAjB;MAAmB9C;MAAMA;MAClGA;;;;MADAA;MACmBA;MAAAA","names":["Router","i0","TakmicarComponent","constructor","router","zajednickiS","ngOnInit","ulogovan","JSON","parse","localStorage","getItem","sve_rezultate_za_takmicara","broj","subscribe","res","rezultati","i","r","discipline","indexOf","disciplina","push","let_rez_za_discipline","length","proveri_gotove","gotove_discipline","forEach","element","console","log","odredi_rangiranje","d","tmp","moderatori_za_disciplinu","tak","takmicari","t","cnt","logout","removeItem","navigate","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\ea200304d\\Desktop\\ETF\\rti.PIA\\K2_MEAN_rokovi\\avgust_22\\frontend\\src\\app\\takmicar\\takmicar.component.ts","C:\\Users\\ea200304d\\Desktop\\ETF\\rti.PIA\\K2_MEAN_rokovi\\avgust_22\\frontend\\src\\app\\takmicar\\takmicar.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Route, Router } from '@angular/router';\nimport { Rezutlat } from 'src/models/rezultat';\nimport { Takmicar } from 'src/models/takmicar';\nimport { ZajednickiService } from '../zajednicki.service';\nimport { Moderator } from 'src/models/moderator';\n\n@Component({\n  selector: 'app-takmicar',\n  templateUrl: './takmicar.component.html',\n  styleUrls: ['./takmicar.component.css']\n})\nexport class TakmicarComponent implements OnInit {\n\n  constructor(private router:Router, private zajednickiS:ZajednickiService) { }\n \n  ulogovan:Takmicar = null\n  rezultati:Array<Rezutlat> = []\n  discipline:Array<String> = []\n  let_rez_za_discipline:any = []\n  kraj_fja:boolean =false\n  gotove_discipline:String[] = []\n  async ngOnInit(){\n    //this.gotove_discipline.push(\"corak\")\n    this.ulogovan = JSON.parse(localStorage.getItem(\"takmicar\"))\n    \n    await this.zajednickiS.sve_rezultate_za_takmicara(this.ulogovan.broj).subscribe(async (res:Array<Rezutlat>)=>{\n      this.rezultati =res\n      let i=0;\n      for(let r of this.rezultati){\n        i++\n        if(this.discipline.indexOf(r.disciplina)>=0) {}\n        else {\n          this.discipline.push(r.disciplina)\n          this.let_rez_za_discipline.push([])\n        }\n        if(i==this.rezultati.length){\n          await this.proveri_gotove()\n          \n          this.gotove_discipline.forEach(async (element)=>{\n            console.log(\"adsaasdas\")\n             await this.odredi_rangiranje(element)\n\n          })\n          /*for(let d of this.gotove_discipline){\n            //odredi rangiranje\n            await this.odredi_rangiranje(d)\n          }*/\n          \n          \n        }\n      }\n    })\n    \n  }\n\n  async odredi_rangiranje(d:String){\n    let tmp:Array<Rezutlat> = []\n    console.log(\"pozvan za \"+d)\n      await this.zajednickiS.moderatori_za_disciplinu(d).subscribe(async (res:Moderator)=>{\n        if(res){\n          let tak = res.takmicari\n\n          let i= -1;\n          for(let t of res.takmicari){\n           await this.zajednickiS.sve_rezultate_za_takmicara(t).subscribe((res:Array<Rezutlat>)=>{\n              i++;\n              for(let r of res){\n                if(r.disciplina == d){\n                  tmp.push(r)\n                }\n              }\n              if(i==(tak.length-1)){\n              }\n            })\n          }\n        }\n      })\n      console.log(\"rang\")\n      console.log(tmp)\n  \n\n  }\n  async proveri_gotove(){\n\n    let cnt=-1;\n    for(let d of this.discipline){\n      cnt++\n      let tmp:Array<Rezutlat> = []\n      await this.zajednickiS.moderatori_za_disciplinu(d).subscribe(async (res:Moderator)=>{\n        if(res) {\n          \n          let tak = res.takmicari\n\n        let i= -1;\n        for(let t of res.takmicari){\n          await this.zajednickiS.sve_rezultate_za_takmicara(t).subscribe((res:Array<Rezutlat>)=>{\n            i++;\n            for(let r of res){\n              if(r.disciplina == d){\n                tmp.push(r)\n              }\n            }\n            if(i==(tak.length-1)){\n              if(tmp.length == (tak.length)*3){\n                this.gotove_discipline.push(d)\n                console.log(d + \" je pushovan\")\n                console.log(this.gotove_discipline)\n              } \n              if(cnt==(this.discipline.length-1)){\n              }\n            }\n          })\n        }\n\n        }else{\n          console.log(\"elsee\")\n        }\n\n        \n        \n        \n      })\n    \n    }\n  }\n  logout(){\n    localStorage.removeItem(\"takmicar\") \n    this.router.navigate([\"\"])\n  }\n\n}\n","{{ulogovan.ime}} [{{ulogovan.broj}}], drzava:{{ulogovan.drzava}} <button (click)=\"logout()\">Odjava</button>\n<div *ngFor=\"let d of discipline\">\n    <table>\n        <tr>\n            <th colspan=\"2\">{{d}}</th>\n        </tr>\n        <tr *ngFor=\"let r of rezultati\">\n            <div *ngIf=\"r.disciplina==d\">\n                <td>\n                    {{r.serija}}\n                </td>\n                <td>\n                    {{r.rezultat}}\n                </td>\n            </div>\n        </tr>\n    </table>\n</div>\n\n"]},"metadata":{},"sourceType":"module"}